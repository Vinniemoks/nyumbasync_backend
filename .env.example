# ============================================
# NyumbaSync Backend - Environment Variables
# ============================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=development
PORT=3001
CLUSTER_MODE=false

# ============================================
# DATABASE
# ============================================
# MongoDB Connection String
# Format: mongodb+srv://username:password@cluster.mongodb.net/database?retryWrites=true&w=majority
MONGODB_URI=mongodb+srv://mokuavinny_db_user:oGe19GUBrHKQSIBy@cluster0.spdjeub.mongodb.net/nyumbasync?retryWrites=true&w=majority

# ============================================
# JWT AUTHENTICATION
# ============================================
# Generate secure random strings (min 32 characters)
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_REFRESH_SECRET=your-refresh-token-secret-change-this-too
JWT_EXPIRES_IN=1h
JWT_REFRESH_EXPIRES_IN=7d

# ============================================
# M-PESA INTEGRATION
# ============================================
# Get credentials from: https://developer.safaricom.co.ke
MPESA_ENV=sandbox
MPESA_CONSUMER_KEY=your-mpesa-consumer-key
MPESA_CONSUMER_SECRET=your-mpesa-consumer-secret
MPESA_PASSKEY=your-mpesa-passkey
MPESA_SHORTCODE=174379
MPESA_CALLBACK_URL=http://localhost:3001/api/v1/payments/mpesa-callback

# Production M-Pesa (uncomment when ready)
# MPESA_ENV=production
# MPESA_CONSUMER_KEY=your-production-consumer-key
# MPESA_CONSUMER_SECRET=your-production-consumer-secret
# MPESA_PASSKEY=your-production-passkey
# MPESA_SHORTCODE=your-business-shortcode
# MPESA_CALLBACK_URL=https://api.nyumbasync.co.ke/api/v1/payments/mpesa-callback

# ============================================
# EMAIL CONFIGURATION (Nodemailer)
# ============================================
# Gmail Example (use App Password, not regular password)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-gmail-app-password
EMAIL_FROM=NyumbaSync <noreply@nyumbasync.co.ke>

# Other providers:
# SendGrid: smtp.sendgrid.net (Port: 587)
# Mailgun: smtp.mailgun.org (Port: 587)
# AWS SES: email-smtp.region.amazonaws.com (Port: 587)

# ============================================
# SMS CONFIGURATION (Twilio)
# ============================================
# Get credentials from: https://www.twilio.com/console
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=+254700000000

# Alternative: Africa's Talking
# AT_USERNAME=your-africas-talking-username
# AT_API_KEY=your-africas-talking-api-key
# AT_SENDER_ID=NYUMBASYNC

# ============================================
# FILE UPLOAD
# ============================================
MAX_FILE_SIZE=10485760
MAX_PAYLOAD_SIZE=50mb
UPLOAD_DIR=./uploads
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# Cloud Storage (Optional - AWS S3)
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=nyumbasync-uploads

# Cloud Storage (Optional - Cloudinary)
# CLOUDINARY_CLOUD_NAME=your-cloud-name
# CLOUDINARY_API_KEY=your-api-key
# CLOUDINARY_API_SECRET=your-api-secret

# ============================================
# CORS CONFIGURATION
# ============================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:19006

# Production origins (uncomment when deploying)
# ALLOWED_ORIGINS=https://nyumbasync.co.ke,https://app.nyumbasync.co.ke,https://www.nyumbasync.co.ke

CORS_MAX_AGE=86400

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_MAX_REQUESTS=100
MAX_REQUESTS_PER_IP=100
MAX_REQUESTS_PER_WORKER=1000

# ============================================
# SESSION MANAGEMENT
# ============================================
# Generate secure random string (min 32 characters)
SESSION_SECRET=your-session-secret-change-this-in-production
SESSION_DURATION=86400000

# Redis (Optional - for session store)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=your-redis-password

# ============================================
# LOGGING
# ============================================
# Levels: error, warn, info, http, verbose, debug, silly
LOG_LEVEL=info
LOG_FORMAT=combined

# External logging service (Optional)
# SENTRY_DSN=your-sentry-dsn
# LOGGLY_TOKEN=your-loggly-token

# ============================================
# NOTIFICATIONS
# ============================================
NOTIFICATION_RETRY_ATTEMPTS=3

# Push Notifications (Optional - Firebase)
# FIREBASE_PROJECT_ID=your-project-id
# FIREBASE_PRIVATE_KEY=your-private-key
# FIREBASE_CLIENT_EMAIL=your-client-email

# ============================================
# GRACEFUL SHUTDOWN
# ============================================
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# ============================================
# MONITORING & ANALYTICS
# ============================================
# Application monitoring (Optional)
# NEW_RELIC_LICENSE_KEY=your-new-relic-key
# DATADOG_API_KEY=your-datadog-key

# ============================================
# SECURITY
# ============================================
# Encryption key for sensitive data
ENCRYPTION_KEY=your-encryption-key-32-chars-min

# ============================================
# FEATURE FLAGS
# ============================================
ENABLE_WEBSOCKET=false
ENABLE_CACHING=false
ENABLE_ANALYTICS=false
ENABLE_EMAIL_VERIFICATION=false
ENABLE_MFA=false

# ============================================
# DEVELOPMENT ONLY
# ============================================
# Set to true to see detailed error messages
DEBUG=false
VERBOSE_LOGGING=false

# ============================================
# TESTING
# ============================================
# TEST_MONGODB_URI=mongodb://localhost:27017/nyumbasync_test
# TEST_JWT_SECRET=test-jwt-secret
